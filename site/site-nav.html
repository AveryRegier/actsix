<!-- Responsive Minimal Top Navigation Bar for ActsSix -->
<nav class="site-nav">
  <div class="nav-icons-mobile">
    <a href="/" class="nav-icon-link home-link" title="Home"><span>ğŸ </span></a>
    <a href="/deacon-quick-contact.html" class="nav-icon-link deacon-link" title="Deacon Quick Contact"><span>ğŸ“</span></a>
    <a href="/members.html" class="nav-icon-link members-link" title="Members"><span>ğŸ‘¥</span></a>
    <a href="/contact-summary.html" class="nav-icon-link summary-link" title="Summary"><span>ğŸ“‹</span></a>
  </div>
  <div class="nav-content">
    <a href="/" class="nav-link home-link" title="Home"><span>ğŸ </span> Home</a>
    <a href="/deacon-quick-contact.html" class="nav-link deacon-link" title="Deacon Quick Contact"><span>ğŸ“</span> Deacon Quick Contact</a>
    <a href="/members.html" class="nav-link members-link" title="Members"><span>ğŸ‘¥</span> Members</a>
    <a href="/contact-summary.html" class="nav-link summary-link" title="Summary"><span>ğŸ“‹</span> Summary</a>
    <a href="javascript:void(0);" class="nav-link back-link" id="siteNavBackLink" onclick="goBack()" title="Back" style="display:none;"><span>â¬…ï¸</span> Back</a>
    <span class="nav-extra"></span>
  </div>
  <button class="nav-menu-btn" aria-label="Menu" onclick="toggleMenu()">â˜°</button>
  <div class="nav-mobile-menu" id="navMobileMenu">
  <a href="/" class="nav-link home-link" title="Home"><span>ğŸ </span> Home</a>
  <a href="/deacon-quick-contact.html" class="nav-link deacon-link" title="Deacon Quick Contact"><span>ğŸ“</span> Deacon Quick Contact</a>
  <a href="/members.html" class="nav-link members-link" title="Members"><span>ğŸ‘¥</span> Members</a>
  <a href="/contact-summary.html" class="nav-link summary-link" title="Summary"><span>ğŸ“‹</span> Summary</a>
    <a href="javascript:void(0);" class="nav-link back-link" id="siteNavBackLinkMobile" onclick="goBack()" title="Back" style="display:none;"><span>â¬…ï¸</span></a>
    <span class="nav-extra"></span>
  </div>
</nav>
<style>
@media (max-width: 600px) {
  .nav-icons-mobile {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-left: 8px;
  }
  .nav-icon-link {
    color: white;
    font-size: 1.5em;
    display: flex;
    align-items: center;
    padding: 0 2px;
    text-decoration: none;
    height: 48px;
  }
  .nav-content {
    display: none;
  }
}
@media (min-width: 601px) {
  .nav-icons-mobile {
    display: none !important;
  }
}
.site-nav {
  position: fixed;
  top: 0; left: 0; right: 0;
  background: #667eea;
  color: white;
  z-index: 100;
  height: 48px;
  display: flex;
  align-items: center;
  box-shadow: 0 2px 8px rgba(0,0,0,0.05);
}
.nav-content {
  display: flex;
  align-items: center;
  width: 100%;
  padding: 0 12px;
}
.nav-link {
  color: white;
  text-decoration: none;
  margin-right: 18px;
  font-size: 1.1em;
  display: flex;
  align-items: center;
  height: 48px;
}
.nav-link span { margin-right: 6px; }
.nav-menu-btn {
  background: none;
  border: none;
  color: white;
  font-size: 2em;
  margin-left: auto;
  cursor: pointer;
  display: none;
}
.nav-extra { margin-left: 12px; }
@media (max-width: 600px) {
  .nav-content { display: none; }
  .nav-menu-btn { display: block; }
  .nav-mobile-menu {
    display: none;
    position: fixed;
    top: 48px; left: 0; right: 0;
    background: #667eea;
    flex-direction: column;
    z-index: 101;
  }
  .nav-mobile-menu.open { display: flex; }
  .nav-mobile-menu a { padding: 18px; font-size: 1.2em; border-bottom: 1px solid #fff2; }
}
@media (min-width: 601px) {
  .nav-mobile-menu { display: none !important; }
}
body { padding-top: 48px; }
</style>
<script>
function goBack() {
  if (document.referrer) {
    window.location.href = document.referrer;
  } else {
    window.location.href = 'index.html';
  }
}
function toggleMenu() {
  const menu = document.getElementById('navMobileMenu');
  menu.classList.toggle('open');
}

// Hide nav link for current page
function hideCurrentPageNavLinks() {
  let page = window.location.pathname.split('/').pop();
  if (!page.endsWith('.html')) {
    page += '.html';
  }
  const navMap = {
    'deacon-quick-contact.html': '.deacon-link',
    'members.html': '.members-link',
    'contact-summary.html': '.summary-link'
  };
  Object.entries(navMap).forEach(([key, selector]) => {
    document.querySelectorAll(selector).forEach(el => {
      el.style.display = (key === page) ? 'none' : '';
    });
  });
}

// Auto-close mobile menu when a link is clicked
document.addEventListener('DOMContentLoaded', function() {
  // Hide Back link if previous navigation was a POST

  let showBack = true;
  // Main nav page filenames
  const mainNavPages = ['deacon-quick-contact.html', 'index.html', 'members.html', 'contact-summary.html', 'summary-report.html'];
  // Check Navigation API for POST
  if (window.navigation && window.navigation.entries) {
    const entries = window.navigation.entries();
    if (entries && entries.length > 1) {
      const prev = entries[entries.length - 2];
      if (prev && prev.method && prev.method.toUpperCase() === 'POST') {
        showBack = false;
      }
    }
  }
  // Fallback: check sessionStorage for last navigation type
  if (sessionStorage.getItem('lastNavWasPost') === 'true') {
    showBack = false;
    sessionStorage.removeItem('lastNavWasPost');
  }
  // Only show Back if referrer is a valid, non-main page
  if (document.referrer) {
    let isMainNav = false;
    try {
      const refUrl = new URL(document.referrer);
      const refPath = refUrl.pathname.split('/').pop();
      isMainNav = mainNavPages.includes(refPath);
    } catch (e) {
      for (const page of mainNavPages) {
        if (document.referrer.includes(page)) {
          isMainNav = true;
          break;
        }
      }
    }
    showBack = !isMainNav;
  } else {
    showBack = false;
  }
  document.getElementById('siteNavBackLink').style.display = showBack ? '' : 'none';
  document.getElementById('siteNavBackLinkMobile').style.display = showBack ? '' : 'none';

  // Hide nav link for current page
  hideCurrentPageNavLinks();

  // Add auto-close for mobile menu
  const mobileMenu = document.getElementById('navMobileMenu');
  mobileMenu.querySelectorAll('a.nav-link').forEach(link => {
    link.addEventListener('click', function() {
      mobileMenu.classList.remove('open');
    });
  });
});
document.addEventListener('submit', function(e) {
  if (e.target && e.target.method && e.target.method.toUpperCase() === 'POST') {
    sessionStorage.setItem('lastNavWasPost', 'true');
  }
}, true);
</script>
